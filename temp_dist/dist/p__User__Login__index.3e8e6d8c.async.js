"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{90615:function(Ae,O,e){e.r(O),e.d(O,{default:function(){return Ze}});var V=e(15009),x=e.n(V),b=e(97857),H=e.n(b),G=e(99289),I=e.n(G),K=e(5574),W=e.n(K),p=e(67294),Q=e(73935),S=e(76772),X=e(40056),z=e(2453),Y=e(11941),$=e(28846),w=e(87547),J=e(94149),g=e(1413),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},q=k,_=e(91146),ee=function(r,i){return p.createElement(_.Z,(0,g.Z)((0,g.Z)({},r),{},{ref:i,icon:q}))},te=p.forwardRef(ee),ne=te,re=e(91),ae=e(10915),se=e(21532),ie=e(93967),oe=e.n(ie),le=e(34994),T=e(4942),ue=e(98082),ce=function(r){return(0,T.Z)((0,T.Z)({},r.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:r.colorTextSecondary,fontSize:r.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,T.Z)({},"".concat(r.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function de(a){return(0,ue.Xj)("LoginForm",function(r){var i=(0,g.Z)((0,g.Z)({},r),{},{componentCls:".".concat(a)});return[ce(i)]})}var t=e(85893),ge=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function fe(a){var r,i=a.logo,A=a.message,N=a.contentStyle,P=a.title,M=a.subTitle,Z=a.actions,R=a.children,C=a.containerStyle,y=a.otherStyle,l=(0,re.Z)(a,ge),E=(0,ae.YB)(),U=l.submitter===!1?!1:(0,g.Z)((0,g.Z)({searchConfig:{submitText:E.getMessage("loginForm.submitText","\u767B\u5F55")}},l.submitter),{},{submitButtonProps:(0,g.Z)({size:"large",style:{width:"100%"}},(r=l.submitter)===null||r===void 0?void 0:r.submitButtonProps),render:function(d,v){var B,s=v.pop();if(typeof(l==null||(B=l.submitter)===null||B===void 0?void 0:B.render)=="function"){var h,j;return l==null||(h=l.submitter)===null||h===void 0||(j=h.render)===null||j===void 0?void 0:j.call(h,d,v)}return s}}),f=(0,p.useContext)(se.ZP.ConfigContext),L=f.getPrefixCls("pro-form-login"),F=de(L),m=F.wrapSSR,o=F.hashId,n=function(d){return"".concat(L,"-").concat(d," ").concat(o)},u=(0,p.useMemo)(function(){return i?typeof i=="string"?(0,t.jsx)("img",{src:i}):i:null},[i]);return m((0,t.jsxs)("div",{className:oe()(n("container"),o),style:C,children:[(0,t.jsxs)("div",{className:"".concat(n("top")," ").concat(o).trim(),children:[P||u?(0,t.jsxs)("div",{className:"".concat(n("header")),children:[u?(0,t.jsx)("span",{className:n("logo"),children:u}):null,P?(0,t.jsx)("span",{className:n("title"),children:P}):null]}):null,M?(0,t.jsx)("div",{className:n("desc"),children:M}):null]}),(0,t.jsxs)("div",{className:n("main"),style:(0,g.Z)({width:328},N),children:[(0,t.jsxs)(le.A,(0,g.Z)((0,g.Z)({isKeyPressSubmit:!0},l),{},{submitter:U,children:[A,R]})),Z?(0,t.jsx)("div",{className:n("main-other"),style:y,children:Z}):null]})]}))}var D=e(5966),me=e(62463),ve=e(2568),he=e.n(ve),xe=e(91122),pe=e(54214),Se=e(67610),ye=(0,$.kc)(function(a){var r=a.token;return{action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:r.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:r.borderRadius,":hover":{backgroundColor:r.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}}),je=function(){return null},Pe=function(r){var i=r.content;return(0,t.jsx)(X.Z,{style:{marginBottom:24},message:i,type:"error",showIcon:!0})},Me=function(){var r=(0,p.useState)(),i=W()(r,2),A=i[0],N=i[1],P=(0,p.useState)("account"),M=W()(P,2),Z=M[0],R=M[1],C=(0,S.useModel)("@@initialState"),y=C.initialState,l=C.setInitialState,E=ye(),U=E.styles,f=(0,S.useIntl)(),L=function(){var m=I()(x()().mark(function o(){var n,u;return x()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,y==null||(n=y.fetchUserInfo)===null||n===void 0?void 0:n.call(y);case 2:u=d.sent,u&&(0,Q.flushSync)(function(){l(function(v){return H()(H()({},v),{},{currentUser:u})})});case 4:case"end":return d.stop()}},o)}));return function(){return m.apply(this,arguments)}}(),F=function(){var m=I()(x()().mark(function o(n){var u,c,d,v;return x()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=f.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),s.prev=1,s.next=4,(0,xe._E)({username:n.username,password:he()(n.password),captcha:n.sysCode.captcha,randomStr:n.sysCode.randomStr}).catch(function(h){var j=h.message;throw j&&N(j),h});case 4:if(c=s.sent,!(c&&c.token)){s.next=14;break}return pe.c.token=c.token,d=f.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),z.ZP.success(d),s.next=11,L();case 11:return v=new URL(window.location.href).searchParams,S.history.push(v.get("redirect")||"/"),s.abrupt("return");case 14:z.ZP.error(u),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(1),z.ZP.error(u);case 20:case"end":return s.stop()}},o,null,[[1,17]])}));return function(n){return m.apply(this,arguments)}}();return(0,t.jsxs)("div",{className:U.container,children:[(0,t.jsx)(S.Helmet,{children:(0,t.jsxs)("title",{children:[f.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",Se.Z.title]})}),(0,t.jsx)(je,{}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(fe,{contentStyle:{minWidth:280,maxWidth:"75vw"},initialValues:{autoLogin:!0},onFinish:function(){var m=I()(x()().mark(function o(n){return x()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,F(n);case 2:case"end":return c.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),children:[(0,t.jsx)(Y.Z,{activeKey:Z,onChange:R,centered:!0,items:[{key:"account",label:f.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})}]}),!!A&&(0,t.jsx)(Pe,{content:A}),Z==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.Z,{name:"username",fieldProps:{size:"large",prefix:(0,t.jsx)(w.Z,{})},placeholder:f.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,t.jsx)(S.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,t.jsx)(D.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(J.Z,{})},placeholder:f.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,t.jsx)(S.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,t.jsx)(me.Z,{name:"sysCode",fieldProps:{size:"large",prefix:(0,t.jsx)(ne,{})},placeholder:"\u56FE\u5F62\u9A8C\u8BC1\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801"},{validator:function(o,n){return n?n.captcha&&n.randomStr?Promise.resolve():Promise.reject("\u8BF7\u8F93\u5165\u56FE\u5F62\u9A8C\u8BC1\u7801"):Promise.resolve()}}]})]})]})})]})},Ze=Me}}]);
